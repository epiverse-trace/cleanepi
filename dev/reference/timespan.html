<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate time span between dates — timespan • cleanepi</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate time span between dates — timespan"><meta name="description" content="Calculate time span between dates"><meta property="og:description" content="Calculate time span between dates"><meta property="og:image" content="https://epiverse-trace.github.io/cleanepi/logo.svg"><meta name="robots" content="noindex"><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">cleanepi</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/cleanepi.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/design_principle.html">Package Design vignette for {cleanepi}</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/cleanepi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Calculate time span between dates</h1>
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/cleanepi/blob/main/R/span.R" class="external-link"><code>R/span.R</code></a></small>
      <div class="d-none name"><code>timespan.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculate time span between dates</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">timespan</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  target_column <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  span_unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"years"</span>, <span class="st">"months"</span>, <span class="st">"weeks"</span>, <span class="st">"days"</span><span class="op">)</span>,</span>
<span>  span_column_name <span class="op">=</span> <span class="st">"span"</span>,</span>
<span>  span_remainder_unit <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>The input <code>&lt;data.frame&gt;</code> or <code>&lt;linelist&gt;</code></p></dd>


<dt id="arg-target-column">target_column<a class="anchor" aria-label="anchor" href="#arg-target-column"></a></dt>
<dd><p>A <code>&lt;vector&gt;</code> of character used to specify the name
of the date column of interest. The values in this column should be of
type <code>&lt;Date&gt;</code> in ISO8601 format, e.g., 2024-01-31.</p></dd>


<dt id="arg-end-date">end_date<a class="anchor" aria-label="anchor" href="#arg-end-date"></a></dt>
<dd><p>The end date. It can be either a <code>&lt;character&gt;</code> that is
the name of another column of type <code>&lt;Date&gt;</code> from the input data or a
<code>&lt;vector&gt;</code> of Dates or a single <code>&lt;Date&gt;</code> value. This should also
be in the ISO8601 format, e.g., 2024-01-31. Default is today's date
<code><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date()</a></code>.</p></dd>


<dt id="arg-span-unit">span_unit<a class="anchor" aria-label="anchor" href="#arg-span-unit"></a></dt>
<dd><p>A <code>&lt;character&gt;</code> that specifies the units in which the
time span between the dates will be returned. The possible units are:
'years', 'months', 'weeks' or 'days'.</p></dd>


<dt id="arg-span-column-name">span_column_name<a class="anchor" aria-label="anchor" href="#arg-span-column-name"></a></dt>
<dd><p>A <code>&lt;character&gt;</code> that specifies the name of the
new column to be used to store the calculated time span in the input data
frame.</p></dd>


<dt id="arg-span-remainder-unit">span_remainder_unit<a class="anchor" aria-label="anchor" href="#arg-span-remainder-unit"></a></dt>
<dd><p>A <code>&lt;character&gt;</code> that specifies the unit in
which the remainder of the time span should be calculated. May be one of
"months", "weeks", and "days". Remainders requested in the same unit as
the age will return values of 0. Default is <code>NULL</code> for decimal
time span.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The input <code>&lt;data.frame&gt;</code> with one or two additional columns:</p><dl><dt>span</dt>
<dd><p>or any other name chosen by the user. This will contain the
calculated time span in the desired units.</p></dd>

<dt>"*_remainder"</dt>
<dd><p>a column with the number of the remaining
days or weeks or months depending on the value of the
'span_remainder_unit' parameter. The star represents here the value
of the 'span_column_name' argument.</p></dd>


</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># In the below example, this function is used to calculate patient's age from</span></span></span>
<span class="r-in"><span><span class="co"># their dates of birth</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># import the data, replace missing values with NA and convert date into ISO</span></span></span>
<span class="r-in"><span><span class="co"># format</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>, package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="replace_missing_values.html">replace_missing_values</a></span><span class="op">(</span>target_columns <span class="op">=</span> <span class="st">"dateOfBirth"</span>,</span></span>
<span class="r-in"><span>                         na_strings <span class="op">=</span> <span class="st">"-99"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="standardize_dates.html">standardize_dates</a></span><span class="op">(</span>target_columns <span class="op">=</span> <span class="st">"dateOfBirth"</span>,</span></span>
<span class="r-in"><span>                    error_tolerance <span class="op">=</span> <span class="fl">0.0</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> Detected <span style="color: #0000BB;">4</span> values that comply with multiple formats and <span style="color: #0000BB;">no</span> values that are</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   outside of the specified time frame.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Enter `print_report(data = dat, "date_standardization")` to access them,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   where <span style="color: #0000BB;">"dat"</span> is the object used to store the output from this operation.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># calculate the age in 'years' and return the remainder in 'months'</span></span></span>
<span class="r-in"><span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu">timespan</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">data</span>,</span></span>
<span class="r-in"><span>  target_column <span class="op">=</span> <span class="st">"dateOfBirth"</span>,</span></span>
<span class="r-in"><span>  end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  span_unit <span class="op">=</span> <span class="st">"years"</span>,</span></span>
<span class="r-in"><span>  span_column_name <span class="op">=</span> <span class="st">"age_in_years"</span>,</span></span>
<span class="r-in"><span>  span_remainder_unit <span class="op">=</span> <span class="st">"months"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Karim Mané, Abdoelnaser Degoot, Bankolé Ahadzie, Nuredin Mohammed, Bubacarr Bah, data.org.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3. Theme provided by <a href="https://github.com/epiverse-trace/epiversetheme" class="external-link">epiversetheme</a> 0.1.0.</p>
</div>

    </footer></div>





  </body></html>

