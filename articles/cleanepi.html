<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="cleanepi">
<title>cleanepi • cleanepi</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="cleanepi">
<meta property="og:description" content="cleanepi">
<meta property="og:image" content="https://epiverse-trace.github.io/cleanepi/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="../logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">cleanepi</a>

    <small class="nav-text text-muted me-auto version-number" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/cleanepi.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/design_principle.html">Package Design vignette for {cleanepi}</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epiverse-trace/cleanepi/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="cleanepi_files/kePrint-0.0.1/kePrint.js"></script><link href="cleanepi_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>cleanepi</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/cleanepi/blob/HEAD/vignettes/cleanepi.Rmd" class="external-link"><code>vignettes/cleanepi.Rmd</code></a></small>
      <div class="d-none name"><code>cleanepi.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="an-overview">An overview<a class="anchor" aria-label="anchor" href="#an-overview"></a>
</h2>
<p>Data cleaning is a critical step of data analysis, especially
considering the messy nature of real-world data, which often includes
duplicates, errors, incomplete entries, and irrelevant formats.
Addressing these issues is essential for producing accurate, reliable,
and reproducible results. However, data cleaning can pose a substantial
barrier in data analysis due to the time-consuming nature of the
process.</p>
<p><strong>{cleanepi}</strong> is an R package designed specifically to
address this challenge by offering tools to clean, curate, and
standardize datasets. Tailored specifically for epidemiological data and
compatible with data frame-like structures, <strong>{cleanepi}</strong>
offers a suite of functions designed to streamline common data cleaning
tasks.</p>
<p>This vignette provides a comprehensive guide to the functionalities
encapsulated within <strong>{cleanepi}</strong>. It provides users with
detailed insights into each function’s purpose and practical usage,
equipping them with the tools necessary to navigate and manipulate
cluttered datasets effectively.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://epiverse-trace.github.io/cleanepi">"cleanepi"</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="general-data-cleaning-tasks">General data cleaning tasks<a class="anchor" aria-label="anchor" href="#general-data-cleaning-tasks"></a>
</h2>
<p>The main function in <strong>{cleanepi}</strong> is
<code><a href="../reference/clean_data.html">clean_data()</a></code> that can perform the following tasks:</p>
<ol style="list-style-type: decimal">
<li>Scan the input data to determine the percent of missing, numeric,
character, logical and date values in every column of the input data
frame.<br>
</li>
<li>Clean up column names and convert them to more intuitive formats.
This includes many sub-tasks such as replacing a space, dot, or hyphen
between two words with underscore; converting camel-cases to
snake-cases; substituting foreign characters with their corresponding
English characters; and splitting a long word into multiple short words
by capital characters within, if any, and connecting them with
underscores.<br>
</li>
<li>Remove duplicated rows across all columns or some specific columns.
This also includes the removal of empty rows and columns as well as
constant columns, i.e. columns with the same value across all
rows.<br>
</li>
<li>Replace missing entries with <code>NA</code>.</li>
<li>Check whether the sequence of date events are correct in all rows of
the input data.</li>
<li>Convert <code>character</code> columns into <code>Date</code> if the
column actually contains values of type <code>Date</code> to some extent
(default is 50% of the values are <code>Date</code>).</li>
<li>Detect and remove rows with subject IDs that do not comply with the
expected format.</li>
<li>Perform dictionary-based cleaning: replace keys in specific columns
with their corresponding values stored in a data dictionary file, and
replace misspelled values with their correct ones.</li>
<li>Convert numbers written in characters into numeric.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># IMPORTING THE TEST DATASET</span></span>
<span><span class="va">test_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>,</span>
<span>                                 package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; overflow-x: scroll; width:100%; ">
<table class="table  lightable-paper lightable-striped" style='font-size: 18px; font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
STUDY_ID
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
EVENT_NAME
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
COUNTRY_CODE
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
COUNTRY_NAME
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
DATE.OF.ADMISSION
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
DATEOFBIRTH
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
DATE_FIRST_PCR_POSITIVE_TEST
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
SEX
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
PS001P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
01/12/2020
</td>
<td style="text-align:left;">
06/01/1972
</td>
<td style="text-align:left;">
Dec 01, 2020
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
PS002P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
28/01/2021
</td>
<td style="text-align:left;">
02/20/1952
</td>
<td style="text-align:left;">
Jan 01, 2021
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
PS004P2-1
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
15/02/2021
</td>
<td style="text-align:left;">
06/15/1961
</td>
<td style="text-align:left;">
Feb 11, 2021
</td>
<td style="text-align:right;">
-99
</td>
</tr>
<tr>
<td style="text-align:left;">
PS003P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
11/02/2021
</td>
<td style="text-align:left;">
11/11/1947
</td>
<td style="text-align:left;">
Feb 01, 2021
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
P0005P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
17/02/2021
</td>
<td style="text-align:left;">
09/26/2000
</td>
<td style="text-align:left;">
Feb 16, 2021
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
PS006P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
17/02/2021
</td>
<td style="text-align:left;">
-99
</td>
<td style="text-align:left;">
May 02, 2021
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
PB500P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
28/02/2021
</td>
<td style="text-align:left;">
11/03/1989
</td>
<td style="text-align:left;">
Feb 19, 2021
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
PS008P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
22/02/2021
</td>
<td style="text-align:left;">
10/05/1976
</td>
<td style="text-align:left;">
Sep 20, 2021
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
PS010P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
02/03/2021
</td>
<td style="text-align:left;">
09/23/1991
</td>
<td style="text-align:left;">
Feb 26, 2021
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
PS011P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
05/03/2021
</td>
<td style="text-align:left;">
02/08/1991
</td>
<td style="text-align:left;">
Mar 03, 2021
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># SCAN THE DATA</span></span>
<span><span class="va">scan_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scan_data.html">scan_data</a></span><span class="op">(</span><span class="va">test_data</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; overflow-x: scroll; width:100%; ">
<table class="table  lightable-paper lightable-striped" style='font-size: 18px; font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
FIELD_NAMES
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
MISSING
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
NUMERIC
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
DATE
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
CHARACTER
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
LOGICAL
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
study_id
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
event_name
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
country_code
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
country_name
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
date.of.admission
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
dateOfBirth
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
0.9
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
date_first_pcr_positive_test
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
sex
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>
<p>In <strong>{cleanepi}</strong>, every cleaning operation is
encapsulated within a module, with detailed descriptions provided in the
package design vignette. Each module also specifies the parameters
required for its main function, outlined in the sections below.</p>
<p>In the following chunk, we define a list of cleaning operations that
we want to perform on the input data.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># PARAMETERS FOR REPLACING MISSING VALUES WITH NA</span></span>
<span><span class="va">rm_na</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>target_columns <span class="op">=</span> <span class="cn">NULL</span>, na_strings <span class="op">=</span> <span class="st">"-99"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># PARAMETERS FOR DUBLICATES DETECTION AND REMOVAL</span></span>
<span><span class="va">rm_dup</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>target_columns   <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>               rm_empty_rows    <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>               rm_empty_cols    <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>               rm_constant_cols <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># PARAMETERS FOR STANDARDING DATES</span></span>
<span><span class="va">stdn_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>target_columns  <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                  error_tolerance <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>                  format          <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                  timeframe       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1973-05-29"</span>, <span class="st">"2023-05-29"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># PARAMETERS FOR STANDARDING SUBJECT IDs</span></span>
<span><span class="va">stdn_ids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>id_col_name <span class="op">=</span> <span class="st">"study_id"</span>,</span>
<span>                 format      <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                 prefix      <span class="op">=</span> <span class="st">"PS"</span>,</span>
<span>                 suffix      <span class="op">=</span> <span class="st">"P2"</span>,</span>
<span>                 range       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># LAOD THE DATA DICTIONARY</span></span>
<span><span class="va">test_dictionary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_dictionary.RDS"</span>,</span>
<span>                                       package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># DEFINE THE LIST OF PARAMETERS</span></span>
<span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  replace_missing_values  <span class="op">=</span> <span class="va">rm_na</span>,</span>
<span>  remove_duplicates       <span class="op">=</span> <span class="va">rm_dup</span>,</span>
<span>  standardize_date        <span class="op">=</span> <span class="va">stdn_date</span>,</span>
<span>  standardize_subject_ids <span class="op">=</span> <span class="va">stdn_ids</span>,</span>
<span>  dictionary              <span class="op">=</span> <span class="va">test_dictionary</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="../reference/clean_data.html">clean_data()</a></code> function, as shown below, requires 2
arguments:</p>
<ol style="list-style-type: decimal">
<li>
<strong>data</strong>: A <code>data.frame</code> or
<code>linelist</code>.</li>
<li>
<strong>params</strong>: A list of parameters that define the
cleaning operations to be performed.</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># CLEAN THE INPUT DATA FRAME</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>cleaned_data <span class="ot">&lt;-</span> <span class="fu">clean_data</span>(</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="at">data   =</span> test_data,</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="at">params =</span> params</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>replacing missing values with <span class="cn">NA</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>removing duplicated rows</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>standardising date columns</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>checking subject IDs format</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>performing dictionary<span class="sc">-</span>based cleaning</span></code></pre></div>
<p>It returns the cleaned dataset. The report generated from the data
cleaning operations is a <code>list object</code> that is attached to
the cleaned data and can be accessed using the <code><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr()</a></code>
function. The report is automatically printed out, and it contains
details of each cleaning operation that was performed successfully.
However, users can access the report using the code below:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ACCESS THE DATA CLEANING REPORT</span></span>
<span><span class="va">report</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">cleaned_data</span>, <span class="st">"report"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># SUMMARIZE THE REPORT OBJECT</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">report</span><span class="op">)</span></span>
<span><span class="co">#&gt;                            Length Class      Mode     </span></span>
<span><span class="co">#&gt; missing_values_replaced_at 1      -none-     character</span></span>
<span><span class="co">#&gt; out_of_range_dates         3      data.frame list     </span></span>
<span><span class="co">#&gt; incorrect_subject_id       2      data.frame list</span></span></code></pre></div>
<p>The report can also be displayed in an HTML format using the
<code><a href="../reference/print_report.html">print_report()</a></code> function as shown below:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/print_report.html">print_report</a></span><span class="op">(</span><span class="va">report</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="specific-data-cleaning-tasks">Specific data cleaning tasks<a class="anchor" aria-label="anchor" href="#specific-data-cleaning-tasks"></a>
</h2>
<p>Certain data cleaning operations are automatically applied to input
data. These operations include renaming columns, removing empty rows and
columns, removing columns with the same values across all rows, and
standardizing date columns. We refer to these operation as the
<code>implicit data cleaning steps</code>, which are executed by
default.</p>
<p>However, we also provide users with the flexibility to call a
specific function if they wish to perform that particular task
individually. This approach allows users to have more control over the
data cleaning process and to apply additional data cleaning functions as
needed.</p>
<p>This setup offers users both convenience and flexibility, as they can
benefit from default data cleaning operations while also having the
option to customize their data cleaning process according to their
specific needs.</p>
<div class="section level3">
<h3 id="standardizing-dates">Standardizing Dates<a class="anchor" aria-label="anchor" href="#standardizing-dates"></a>
</h3>
<p>The <code><a href="../reference/standardize_dates.html">standardize_dates()</a></code> function provides a
comprehensive set of options for converting date columns into a
specified format and handling various scenarios, such as different date
formats and mixed data types in a column.</p>
<p>The default date format in R is <code>%Y-%m-%d</code> (the ISO
format). However, it is very common to encounter date values that are
written differently from this. Also, there are cases where a column in a
data frame contains both values of type <code>Date</code>,
<code>character</code> or others.</p>
<p>The <code><a href="../reference/standardize_dates.html">standardize_dates()</a></code> function offers the possibility
to convert date columns into <code>%Y-%m-%d</code> format and convert
<code>character</code> columns into <code>Date</code> if the percentage
of date values reach a specified threshold. The function needs the
following arguments:</p>
<ol style="list-style-type: decimal">
<li>
<strong>data</strong>: A data frame or linelist (required).<br>
</li>
<li>
<strong>target_columns</strong>: A vector of the names of the
columns to be converted (optional). When not provided, the function will
attempt to detect date columns and perform the conversion if
needed.</li>
<li>
<strong>format</strong>: A format of the values in the specified
columns (optional). If not provided, the function will attempt to infer
the format.</li>
<li>
<strong>timeframe</strong>: The expected time frame within which the
date values should fall. Values outside of this range will be set to
<code>NA</code> (optional).</li>
<li>
<strong>error_tolerance</strong>: The minimum percentage of values
of type Date in a character column needed to convert it into a Date
column. Default is 50% i.e. <code>0.5</code>.</li>
</ol>
<p>⚠️ The <code>error_tolerance</code> must be used with caution. When
it is set, and the percentage of date values in a character column is
less than this threshold, the column will be returned as it is.</p>
<p>This function provides users with the flexibility to standardize date
columns in their dataset according to specified requirements, including
format, timeframe, and error tolerance for conversion from character to
date columns.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># STANDARDISE VALUES IN THE 'date_first_pcr_positive_test' COLUMN</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>,</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>                                 <span class="at">package =</span> <span class="st">"cleanepi"</span>))</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="fu">head</span>(test_data<span class="sc">$</span>date_first_pcr_positive_test)</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>date_standardisation [<span class="dv">1</span>] <span class="st">"Dec 01, 2020"</span> <span class="st">"Jan 01, 2021"</span> <span class="st">"Feb 11, 2021"</span> <span class="st">"Feb 01, 2021"</span> <span class="st">"Feb 16, 2021"</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>date_standardisation [<span class="dv">6</span>] <span class="st">"May 02, 2021"</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">standardize_dates</span>(</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>  <span class="at">data            =</span> test_data,</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>  <span class="at">target_columns  =</span> <span class="st">"date_first_pcr_positive_test"</span>,</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>  <span class="at">format          =</span> <span class="cn">NULL</span>,</span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>  <span class="at">timeframe       =</span> <span class="cn">NULL</span>,</span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>  <span class="at">error_tolerance =</span> <span class="fl">0.5</span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>)</span></code></pre></div>
<p>This function returns a the input dataset where the (specified)
columns are converted into date if the condition is met.</p>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; overflow-x: scroll; width:100%; ">
<table class="table  lightable-paper lightable-striped" style='font-size: 18px; font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
STUDY_ID
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
EVENT_NAME
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
COUNTRY_CODE
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
COUNTRY_NAME
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
DATE.OF.ADMISSION
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
DATEOFBIRTH
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
DATE_FIRST_PCR_POSITIVE_TEST
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
SEX
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
PS001P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
01/12/2020
</td>
<td style="text-align:left;">
06/01/1972
</td>
<td style="text-align:left;">
2020-12-01
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
PS002P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
28/01/2021
</td>
<td style="text-align:left;">
02/20/1952
</td>
<td style="text-align:left;">
2021-01-01
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
PS004P2-1
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
15/02/2021
</td>
<td style="text-align:left;">
06/15/1961
</td>
<td style="text-align:left;">
2021-02-11
</td>
<td style="text-align:right;">
-99
</td>
</tr>
<tr>
<td style="text-align:left;">
PS003P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
11/02/2021
</td>
<td style="text-align:left;">
11/11/1947
</td>
<td style="text-align:left;">
2021-02-01
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
P0005P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
17/02/2021
</td>
<td style="text-align:left;">
09/26/2000
</td>
<td style="text-align:left;">
2021-02-16
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
PS006P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
17/02/2021
</td>
<td style="text-align:left;">
-99
</td>
<td style="text-align:left;">
2021-05-02
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
PB500P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
28/02/2021
</td>
<td style="text-align:left;">
11/03/1989
</td>
<td style="text-align:left;">
2021-02-19
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
PS008P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
22/02/2021
</td>
<td style="text-align:left;">
10/05/1976
</td>
<td style="text-align:left;">
2021-09-20
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
PS010P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
02/03/2021
</td>
<td style="text-align:left;">
09/23/1991
</td>
<td style="text-align:left;">
2021-02-26
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
PS011P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
05/03/2021
</td>
<td style="text-align:left;">
02/08/1991
</td>
<td style="text-align:left;">
2021-03-03
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="standardizing-subject-ids">Standardizing subject IDs<a class="anchor" aria-label="anchor" href="#standardizing-subject-ids"></a>
</h3>
<p>The <code><a href="../reference/check_subject_ids.html">check_subject_ids()</a></code> function is designed to identify
and eliminate rows from the input dataset that don’t comply with the
expected format for subject IDs. It requires the following
parameters:</p>
<ol style="list-style-type: decimal">
<li>
<strong>data</strong>: A data frame or linelist (required).</li>
<li>
<strong>id_column_name</strong>: The name of the column containing
the subject IDs in the dataset (required).</li>
<li>
<strong>format</strong>: The expected format for the subject IDs.
The function will use this format to validate the IDs (optional).</li>
<li>
<strong>prefix</strong>: A string. If subject IDs have a specified
prefix, it is used as a value for this argument. This is optional and
can be omitted if there is no prefix.</li>
<li>
<strong>suffix</strong>: A string. If subject IDs have a specified
suffix, it is used as a value for this argument. It can be ignored
otherwise.</li>
<li>
<strong>range</strong>: A vector of two elements. If there is an
expected range of numbers within the subject IDs, define it using this
parameter. It is optional and can be omitted if there is no specific
range.</li>
</ol>
<p>By providing these parameters, the function becomes a versatile tool
for data cleaning, ensuring that only rows with subject IDs adhering to
the expected format are retained in the dataset. When using the
function, make sure to tailor the parameters according to the specific
requirements of your dataset and the expected characteristics of the
subject IDs.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># DETECT AND REMOVE INCORRECT SUBJECT IDs</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">check_subject_ids</span>(</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>  <span class="at">data           =</span> <span class="fu">readRDS</span>(<span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>,</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>                                       <span class="at">package =</span> <span class="st">"cleanepi"</span>)),</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>  <span class="at">id_column_name =</span> <span class="st">"study_id"</span>,</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>  <span class="at">format         =</span> <span class="st">"PS000P2"</span>,</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>  <span class="at">prefix         =</span> <span class="st">"PS"</span>,</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>  <span class="at">suffix         =</span> <span class="st">"P2"</span>,</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>  <span class="at">range          =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="dt">L</span>, <span class="dv">100</span><span class="dt">L</span>)</span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>)</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="co"># EXTRACT REPORT</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>report <span class="ot">&lt;-</span> <span class="fu">attr</span>(res, <span class="st">"report"</span>)</span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="co"># SUMMARIZE THE REPORT OBJECT</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="fu">summary</span>(report)</span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>subject_ids_standaedisation                      Length Class      Mode</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>subject_ids_standaedisation incorrect_subject_id <span class="dv">2</span>      data.frame list</span></code></pre></div>
<p>The <code><a href="../reference/check_subject_ids.html">check_subject_ids()</a></code> function returns the input
dataset or a subset of a subset of the input data where rows with
incorrect IDs have been removed.</p>
<p>In addition to detecting wrong subject IDs, the function will also
look for missing and duplicated IDs. As the result of this, the report
made from this operation might contain two extra elements:
<strong>missing_ids</strong> (a vector of row indexes where there is a
missing IDs) and <strong>duplicated_ids</strong> (a data frame of rows
with the duplicated IDs). Use the <code><a href="../reference/print_report.html">print_report()</a></code> function
to display the report made from this operation.</p>
</div>
<div class="section level3">
<h3 id="checking-date-sequence">Checking date sequence<a class="anchor" aria-label="anchor" href="#checking-date-sequence"></a>
</h3>
<p>The <code><a href="../reference/check_date_sequence.html">check_date_sequence()</a></code> function verifies the order of
sequences in date event columns within a dataset. It ensures that the
values in specified date columns follow the desired chronological order.
Here are the arguments accepted by the function:</p>
<ol style="list-style-type: decimal">
<li>
<strong>data</strong>: A data frame or linelist (required).</li>
<li>
<strong>target_columns</strong>: A vector containing the names of
date columns of interest. These columns should be listed in the expected
order of occurrence, reflecting the chronological sequence of events.
For example,
<code>target_columns = c("date_of_infection", "date_of_admission", "date_of_death")</code>.</li>
<li>
<strong>remove_bad_seq</strong>: A Boolean variable with a default
value of <code>FALSE</code>. If set to <code>TRUE</code>, rows with
incorrect date sequences will be removed from the output object.
Otherwise, they will be flagged as erroneous and stored in the report
object.</li>
</ol>
<p>By utilizing these arguments, the <code><a href="../reference/check_date_sequence.html">check_date_sequence()</a></code>
function facilitates the validation of date sequences within a dataset,
ensuring data integrity and accuracy for further analysis. Additionally,
it offers flexibility by allowing users to choose whether to remove rows
with incorrect sequences or store them for further examination in the
report object.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># DETECT ROWS WITH INCORRECT DATE SEQUENCE</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">check_date_sequence</span>(</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="at">data           =</span> <span class="fu">readRDS</span>(<span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>,</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>                                       <span class="at">package =</span> <span class="st">"cleanepi"</span>)),</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  <span class="at">target_columns =</span> <span class="fu">c</span>(<span class="st">"date_first_pcr_positive_test"</span>, <span class="st">"date.of.admission"</span>),</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  <span class="at">remove_bad_seq =</span> <span class="cn">FALSE</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>)</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>check_date_order Warning<span class="sc">:</span> Detected <span class="dv">2</span> incorrect date sequences at <span class="fu">line</span>(s)<span class="sc">:</span> <span class="dv">6</span>, <span class="dv">8</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co"># EXTRACT THE REPORT</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>report <span class="ot">&lt;-</span> <span class="fu">attr</span>(res, <span class="st">"report"</span>)</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="co"># SUMMARIZE THE REPORT OBJECT</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a><span class="fu">summary</span>(report)</span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a>check_date_order                         Length Class      Mode</span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a>check_date_order incorrect_date_sequence <span class="dv">2</span>      data.table list</span></code></pre></div>
<p>The <code><a href="../reference/check_date_sequence.html">check_date_sequence()</a></code> function returns the input
dataset or a subset of it without the rows that have incorrect date
sequences, depending on whether the <code>remove_bad_seq</code>
parameter is set to <code>TRUE</code>. It also provides a detailed
report highlighting any discrepancies found in the date sequences,
enabling users to take appropriate actions. Use the
<code><a href="../reference/print_report.html">print_report()</a></code> function to display the report made from
this operation.</p>
</div>
<div class="section level3">
<h3 id="converting-character-columns-into-numeric">Converting character columns into numeric<a class="anchor" aria-label="anchor" href="#converting-character-columns-into-numeric"></a>
</h3>
<p>In certain scenarios, the input data contains columns where the
number are written in letters. For instance, the ages of a study
participants can be written in letters. Similarly, a column can contain
values written in both numbers and letters (an age column where some
values are written in numbers and others in letters). The
<code><a href="../reference/convert_to_numeric.html">convert_to_numeric()</a></code> function offers the framework to
convert all numbers written in letters from a given column into numeric.
It takes the following arguments:</p>
<ol style="list-style-type: decimal">
<li>
<strong>data</strong>: A data frame or linelist (required).</li>
<li>
<strong>target_columns</strong>: A vector containing the names of
the columns of interest. When dealing with a linelist, this can be set
to <code>linelist_tags</code> if the tagged columns are the one to be
converted into numeric. When <code>target_columns = NULL</code>, the
function uses the output form the <code><a href="../reference/scan_data.html">scan_data()</a></code> function to
identify the columns where the proportion of numeric values is at least
twice as the percentage of character values. Those columns will be the
columns of interest interest and the character values in them will be
converted into numeric. Note that any string in such column that can not
be converted into numeric will be set to <code>NA</code> in the
resulting data.</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># CONVERT THE 'age' COLUMN IN THE </span><span class="al">TEST</span><span class="co"> LINELIST DATA</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"messy_data.RDS"</span>, <span class="at">package =</span> <span class="st">"cleanepi"</span>))</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="fu">head</span>(dat<span class="sc">$</span>age, <span class="dv">10</span><span class="dt">L</span>)</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>check_date_order  [<span class="dv">1</span>] <span class="st">"37"</span>           <span class="st">"seventy-four"</span> <span class="st">"17"</span>           <span class="st">"3"</span>            <span class="st">"37"</span>          </span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>check_date_order  [<span class="dv">6</span>] <span class="cn">NA</span>             <span class="st">"6"</span>            <span class="st">"26"</span>           <span class="st">"eleven"</span>       <span class="st">"44"</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">convert_to_numeric</span>(dat, <span class="at">target_columns =</span> <span class="st">"age"</span>)</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="fu">head</span>(dat<span class="sc">$</span>age, <span class="dv">10</span><span class="dt">L</span>)</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>check_date_order  [<span class="dv">1</span>] <span class="dv">37</span> <span class="dv">74</span> <span class="dv">17</span>  <span class="dv">3</span> <span class="dv">37</span> <span class="cn">NA</span>  <span class="dv">6</span> <span class="dv">26</span> <span class="dv">11</span> <span class="dv">44</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="finding-duplicated-rows">Finding duplicated rows<a class="anchor" aria-label="anchor" href="#finding-duplicated-rows"></a>
</h3>
<p>The <code><a href="../reference/find_duplicates.html">find_duplicates()</a></code> function serves the purpose of
identifying duplicated rows within a given dataset. It accepts the
following parameters:</p>
<ol style="list-style-type: decimal">
<li>
<strong>data</strong>: The input data frame or linelist.</li>
<li>
<strong>target_columns</strong>: A vector containing either column
names or indexes from which duplicated rows will be identified. If
<code>NULL</code> is passed, duplicates will be detected across all
columns of the dataset. Notably, if the input dataset is a
<code>linelist</code> object, <code>target_columns</code> can be set to
<code>tags</code> specifically to identify duplicates across the tagged
variables only.</li>
</ol>
<p>By leveraging the <code><a href="../reference/find_duplicates.html">find_duplicates()</a></code> function with
appropriate parameters, users can efficiently pinpoint duplicated rows
within their datasets, either across all columns or selectively across
tagged variables in a <code>linelist</code> object.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># IMPORT A `linelist` DATA</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"test_linelist.RDS"</span>,</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>                            <span class="at">package =</span> <span class="st">"cleanepi"</span>))</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="co"># SHOW THE TAGGED VARIABLES</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>linelist<span class="sc">::</span><span class="fu">tags</span>(data)</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="sc">$</span>date_onset</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"dt_onset"</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="sc">$</span>date_reporting</span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"dt_report"</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="sc">$</span>gender</span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"sex"</span></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="sc">$</span>outcome</span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"outcome"</span></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a><span class="co"># FIND DUPLICATES ACROSS ALL COLUMNS EXCEPT THE SUBJECT IDs COLUMN</span></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a>all_columns    <span class="ot">&lt;-</span> <span class="fu">names</span>(data)</span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a>target_columns <span class="ot">&lt;-</span> all_columns[all_columns <span class="sc">!=</span> <span class="st">"id"</span>]</span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a>dups           <span class="ot">&lt;-</span> <span class="fu">find_duplicates</span>(<span class="at">data           =</span> data,</span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a>                                  <span class="at">target_columns =</span> target_columns)</span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" tabindex="-1"></a><span class="co"># FIND DUPLICATES ACROSS TAGGED VARIABLES</span></span>
<span id="cb12-26"><a href="#cb12-26" tabindex="-1"></a>dups <span class="ot">&lt;-</span> <span class="fu">find_duplicates</span>(</span>
<span id="cb12-27"><a href="#cb12-27" tabindex="-1"></a>  <span class="at">data           =</span> data,</span>
<span id="cb12-28"><a href="#cb12-28" tabindex="-1"></a>  <span class="at">target_columns =</span> <span class="st">"linelist_tags"</span></span>
<span id="cb12-29"><a href="#cb12-29" tabindex="-1"></a>)</span>
<span id="cb12-30"><a href="#cb12-30" tabindex="-1"></a>Found <span class="dv">57</span> duplicated rows. Please consult the report <span class="cf">for</span> more details.</span></code></pre></div>
<p>Upon execution, the <code><a href="../reference/find_duplicates.html">find_duplicates()</a></code> function
identifies all duplicated rows either based on all columns or those
specified, and stores them in the report. In addition to the existing
columns, it appends two extra columns to the dataset:</p>
<ol style="list-style-type: decimal">
<li><p><code>row_id</code>: Contains indexes of the duplicated rows from
the original input dataset.</p></li>
<li><p><code>group_id</code>: Contains unique identifiers assigned to
each duplicated group, which is defined as a set of rows sharing
identical values in the designated columns of interest.</p></li>
</ol>
<p>By including these extra columns, users gain insights into the
specific rows identified as duplicates and their corresponding group
identifiers, enabling efficient analysis and management of duplicated
data within the dataset.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># VISUALIZE THE DUPLICATES</span></span>
<span><span class="va">report</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">dups</span>, <span class="st">"report"</span><span class="op">)</span></span>
<span><span class="va">duplicates</span> <span class="op">&lt;-</span> <span class="va">report</span><span class="op">$</span><span class="va">duplicated_rows</span></span>
<span><span class="va">duplicates</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names</a></span><span class="op">(</span><span class="va">toupper</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html" class="external-link">kable_paper</a></span><span class="op">(</span><span class="st">"striped"</span>, font_size <span class="op">=</span> <span class="fl">18</span>, full_width <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html" class="external-link">scroll_box</a></span><span class="op">(</span>height <span class="op">=</span> <span class="st">"200px"</span>, width <span class="op">=</span> <span class="st">"100%"</span>,</span>
<span>                         box_css <span class="op">=</span> <span class="st">"border: 1px solid #ddd; padding: 5px; "</span>,</span>
<span>                         extra_css <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                         fixed_thead <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; overflow-x: scroll; width:100%; ">
<table class="table  lightable-paper lightable-striped" style='font-size: 18px; font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ROW_ID
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
GROUP_ID
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
DT_ONSET
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
DT_REPORT
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
SEX
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
OUTCOME
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2015-05-21
</td>
<td style="text-align:left;">
2015-06-03
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2015-05-21
</td>
<td style="text-align:left;">
2015-06-03
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
55
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2015-05-30
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2015-05-30
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
2015-05-31
</td>
<td style="text-align:left;">
2015-06-02
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Dead
</td>
</tr>
<tr>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
2015-05-31
</td>
<td style="text-align:left;">
2015-06-02
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Dead
</td>
</tr>
<tr>
<td style="text-align:right;">
99
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
2015-05-31
</td>
<td style="text-align:left;">
2015-06-09
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
105
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
2015-05-31
</td>
<td style="text-align:left;">
2015-06-09
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
2015-06-01
</td>
<td style="text-align:left;">
2015-06-03
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
2015-06-01
</td>
<td style="text-align:left;">
2015-06-03
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
44
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
2015-06-01
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
60
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
2015-06-01
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
65
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
2015-06-01
</td>
<td style="text-align:left;">
2015-06-07
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
73
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
2015-06-01
</td>
<td style="text-align:left;">
2015-06-07
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
78
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
2015-06-01
</td>
<td style="text-align:left;">
2015-06-07
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
82
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
2015-06-01
</td>
<td style="text-align:left;">
2015-06-07
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
85
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
2015-06-01
</td>
<td style="text-align:left;">
2015-06-07
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
2015-06-02
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Dead
</td>
</tr>
<tr>
<td style="text-align:right;">
51
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
2015-06-02
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Dead
</td>
</tr>
<tr>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
2015-06-02
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
58
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
2015-06-02
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
61
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
2015-06-02
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
2015-06-02
</td>
<td style="text-align:left;">
2015-06-10
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
122
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
2015-06-02
</td>
<td style="text-align:left;">
2015-06-10
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
54
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
2015-06-03
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
63
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
2015-06-03
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
68
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
2015-06-04
</td>
<td style="text-align:left;">
2015-06-07
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
71
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
2015-06-04
</td>
<td style="text-align:left;">
2015-06-07
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
79
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
2015-06-04
</td>
<td style="text-align:left;">
2015-06-07
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
87
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
2015-06-04
</td>
<td style="text-align:left;">
2015-06-07
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
102
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
2015-06-04
</td>
<td style="text-align:left;">
2015-06-09
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
108
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
2015-06-04
</td>
<td style="text-align:left;">
2015-06-09
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
96
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
2015-06-09
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
107
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
2015-06-09
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
103
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
2015-06-09
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
104
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
2015-06-09
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
132
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2015-06-08
</td>
<td style="text-align:left;">
2015-06-12
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
133
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2015-06-08
</td>
<td style="text-align:left;">
2015-06-12
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
135
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
2015-06-08
</td>
<td style="text-align:left;">
2015-06-12
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
129
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
2015-06-10
</td>
<td style="text-align:left;">
2015-06-12
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
138
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
2015-06-10
</td>
<td style="text-align:left;">
2015-06-12
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
49
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-06
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
69
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-07
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-07
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
91
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-08
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
95
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-08
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
119
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-10
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
121
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-10
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
155
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-16
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
161
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-16
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
156
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-16
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
157
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-16
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
158
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-16
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
159
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-16
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
160
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-16
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
<tr>
<td style="text-align:right;">
162
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
2015-06-16
</td>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
Alive
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="removing-duplicates">Removing duplicates<a class="anchor" aria-label="anchor" href="#removing-duplicates"></a>
</h3>
<p>To eliminate duplicated rows from a dataset, the
<code><a href="../reference/remove_duplicates.html">remove_duplicates()</a></code> function can be employed. This function
internally utilizes the <code><a href="../reference/find_duplicates.html">find_duplicates()</a></code> function and
expects the following parameters:</p>
<ol style="list-style-type: decimal">
<li>
<strong>data</strong>: A data frame of the input dataset from which
duplicated rows will be removed.</li>
<li>
<strong>target_columns</strong>: A vector containing either column
names or indexes specifying the columns from which duplicated rows will
be identified. If set to <code>NULL</code>, the function will detect
duplicates across all columns. If the input dataset is a
<code>linelist</code> object, setting this parameter to
<code>tags</code> will identify duplicates across the tagged variables
only.</li>
<li>
<strong>remove</strong>: A numeric vector of the indices of the
duplicated rows to be removed. If set to <code>NULL</code>, the function
removes duplicates and retains only the first occurrence of the
duplicated rows.</li>
<li>
<strong>rm_empty_rows</strong>: A Boolean to indicate whether to
remove empty rows or not. The default is <code>TRUE</code>
</li>
<li>
<strong>rm_empty_cols</strong>: A Boolean to indicate whether to
remove empty columns or not. The default is <code>TRUE</code>
</li>
<li>
<strong>rm_constant_cols</strong>: A Boolean to indicate whether to
remove constant columns or not. The default is <code>TRUE</code>
</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># REMOVE DUPLICATE ACROSS TAGGED COLUMNS ONLY.</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/remove_duplicates.html">remove_duplicates</a></span><span class="op">(</span></span>
<span>  data           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_linelist.RDS"</span>,</span>
<span>                                       package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  target_columns <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  remove         <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Upon execution, the <code><a href="../reference/remove_duplicates.html">remove_duplicates()</a></code> function returns
the input dataset with duplicated rows removed (if found). The details
about the duplicates removal operation are reported as a list attached
to the output object. When duplicates are found, this report will
contain the following elements:</p>
<ul>
<li>
<strong>empty_columns</strong>: A vector of empty columns (if
found).</li>
<li>
<strong>constant_columns</strong>: A vector of constant columns (if
found).</li>
<li>
<strong>duplicated_rows</strong>: A data frame with the detected
duplicates.</li>
<li>
<strong>removed_duplicates</strong>: A data frame with the
duplicated rows that have been removed.</li>
<li>
<strong>duplicates_checked_from</strong>: A vector of the names of
the columns from which duplicates were identified.</li>
</ul>
<p>By examining these elements within the report, users gain insights
into the specific duplicated rows, those that were removed, and the
columns used to identify the duplicated, thus facilitating transparency
and documentation of the duplicates removal process.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># ACCESS THE REPORT</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>report <span class="ot">&lt;-</span> <span class="fu">attr</span>(res, <span class="st">"report"</span>)</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co"># SUMMARIZE THE REPORT OBJECT</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="fu">summary</span>(report)</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>Length  Class   Mode </span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>     <span class="dv">0</span>   <span class="cn">NULL</span>   <span class="cn">NULL</span> </span></code></pre></div>
<p>Use the <code><a href="../reference/print_report.html">print_report()</a></code> function to display the report
made from this operation</p>
<p>The output from <code><a href="../reference/find_duplicates.html">find_duplicates()</a></code> function can also be
passed to <code><a href="../reference/remove_duplicates.html">remove_duplicates()</a></code> function to specify which
duplicated rows to be removed.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># DETECT DUPLICATES FROM TAGGED COLUMNS</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>dups <span class="ot">&lt;-</span> <span class="fu">find_duplicates</span>(</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  <span class="at">data           =</span> <span class="fu">readRDS</span>(<span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"test_linelist.RDS"</span>,</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>                                       <span class="at">package =</span> <span class="st">"cleanepi"</span>)),</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>  <span class="at">target_columns =</span> <span class="st">"linelist_tags"</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>)</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>find_and_remove_dups Found <span class="dv">57</span> duplicated rows. Please consult the report <span class="cf">for</span> more details.</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="co"># EXTRACT THE DUPLICATES</span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>report     <span class="ot">&lt;-</span> <span class="fu">attr</span>(dups, <span class="st">"report"</span>)</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>duplicates <span class="ot">&lt;-</span> report<span class="sc">$</span>duplicated_rows</span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a></span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a><span class="co"># REMOVE FIRST OCCURRENCE OF DUPLICATED ROWS</span></span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a>dups_index_to_remove <span class="ot">&lt;-</span> duplicates[[<span class="st">"row_id"</span>]][<span class="fu">seq</span>(<span class="dv">1</span><span class="dt">L</span>, <span class="fu">nrow</span>(dups), <span class="dv">2</span><span class="dt">L</span>)]</span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a>dups_index_to_remove <span class="ot">&lt;-</span> dups_index_to_remove[<span class="sc">!</span><span class="fu">is.na</span>(dups_index_to_remove)]</span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a>no_dups <span class="ot">&lt;-</span> <span class="fu">remove_duplicates</span>(</span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a>  <span class="at">data           =</span> <span class="fu">readRDS</span>(<span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"test_linelist.RDS"</span>,</span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a>                                       <span class="at">package =</span> <span class="st">"cleanepi"</span>)),</span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a>  <span class="at">target_columns =</span> <span class="st">"linelist_tags"</span>,</span>
<span id="cb16-20"><a href="#cb16-20" tabindex="-1"></a>  <span class="at">remove         =</span> dups_index_to_remove</span>
<span id="cb16-21"><a href="#cb16-21" tabindex="-1"></a>)</span>
<span id="cb16-22"><a href="#cb16-22" tabindex="-1"></a>find_and_remove_dups Found <span class="dv">57</span> duplicated rows. Please consult the report <span class="cf">for</span> more details.</span>
<span id="cb16-23"><a href="#cb16-23" tabindex="-1"></a></span>
<span id="cb16-24"><a href="#cb16-24" tabindex="-1"></a><span class="co"># KEEP SPECIFIC DUPLICATED ROWS</span></span>
<span id="cb16-25"><a href="#cb16-25" tabindex="-1"></a>no_dups <span class="ot">&lt;-</span> <span class="fu">remove_duplicates</span>(</span>
<span id="cb16-26"><a href="#cb16-26" tabindex="-1"></a>  <span class="at">data           =</span> <span class="fu">readRDS</span>(<span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"test_linelist.RDS"</span>,</span>
<span id="cb16-27"><a href="#cb16-27" tabindex="-1"></a>                                       <span class="at">package =</span> <span class="st">"cleanepi"</span>)),</span>
<span id="cb16-28"><a href="#cb16-28" tabindex="-1"></a>  <span class="at">target_columns =</span> <span class="st">"linelist_tags"</span>,</span>
<span id="cb16-29"><a href="#cb16-29" tabindex="-1"></a>  <span class="at">remove         =</span> <span class="sc">-</span><span class="fu">c</span>(<span class="dv">33</span>, <span class="dv">55</span>)</span>
<span id="cb16-30"><a href="#cb16-30" tabindex="-1"></a>)</span>
<span id="cb16-31"><a href="#cb16-31" tabindex="-1"></a>find_and_remove_dups Found <span class="dv">57</span> duplicated rows. Please consult the report <span class="cf">for</span> more details.</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="dictionary-based-data-substituting">Dictionary based data substituting<a class="anchor" aria-label="anchor" href="#dictionary-based-data-substituting"></a>
</h3>
<p>The <code><a href="../reference/clean_using_dictionary.html">clean_using_dictionary()</a></code> function offers a
convenient way to replace the options in a data frame or linelist with
their corresponding values stored in a data dictionary file. The
function expects the following arguments:</p>
<ol style="list-style-type: decimal">
<li>
<strong>data</strong>: The input data frame or linelist that
contains the options to be replaced.</li>
<li>
<strong>dictionary</strong>: The data frame with the data dictionary
that contains the complete labels for these options. The structure of
this data dictionary file should adhere to the standards expected by the
<a href="https://www.repidemicsconsortium.org/matchmaker/" class="external-link">matchmaker</a>
package, as the <code><a href="../reference/clean_using_dictionary.html">clean_using_dictionary()</a></code> function relies on
functions from this package.</li>
</ol>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; overflow-x: scroll; width:100%; ">
<table class="table  lightable-paper lightable-striped" style='font-size: 18px; font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
OPTIONS
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
VALUES
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
GRP
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ORDERS
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
sex
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
sex
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
</div>
<p>The <code><a href="../reference/add_to_dictionary.html">add_to_dictionary()</a></code> function is a useful tool for
expanding the coverage of a data dictionary by defining options that are
present in the input data but not originally included in the dictionary.
This function enables users to dynamically update the dictionary to
accommodate new values encountered in the dataset. In addition to the
current data dictionary the function takes the arguments defined
below:</p>
<p><strong>option, value, grp, order</strong>: the values for the
options to be added in the data dictionary. The example below shows how
this function is used.</p>
<p>By employing the <code><a href="../reference/add_to_dictionary.html">add_to_dictionary()</a></code> function, users can
ensure that the data dictionary remains comprehensive and aligned with
the evolving nature of the input dataset, thereby enhancing the accuracy
and completeness of data interpretation and analysis. In the example
below, we add <code>-99</code> to our test data dictionary,
<code>test_dictionary</code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># READING IN THE DATA</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>,</span>
<span>                            package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ADD THE EXTRA OPTION TO THE DICTIONARY</span></span>
<span><span class="va">test_dictionary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_to_dictionary.html">add_to_dictionary</a></span><span class="op">(</span><span class="va">test_dictionary</span>,</span>
<span>                                      option <span class="op">=</span> <span class="st">"-99"</span>,</span>
<span>                                      value  <span class="op">=</span> <span class="st">"unknow"</span>,</span>
<span>                                      grp    <span class="op">=</span> <span class="st">"sex"</span>,</span>
<span>                                      order  <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; overflow-x: scroll; width:100%; ">
<table class="table  lightable-paper lightable-striped" style='font-size: 18px; font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
OPTIONS
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
VALUES
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
GRP
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
ORDERS
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
male
</td>
<td style="text-align:left;">
sex
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
female
</td>
<td style="text-align:left;">
sex
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
-99
</td>
<td style="text-align:left;">
unknow
</td>
<td style="text-align:left;">
sex
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cleaned_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/clean_using_dictionary.html">clean_using_dictionary</a></span><span class="op">(</span></span>
<span>  data       <span class="op">=</span> <span class="va">data</span>,</span>
<span>  dictionary <span class="op">=</span> <span class="va">test_dictionary</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; overflow-x: scroll; width:100%; ">
<table class="table  lightable-paper lightable-striped" style='font-size: 18px; font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
STUDY_ID
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
EVENT_NAME
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
COUNTRY_CODE
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
COUNTRY_NAME
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
DATE.OF.ADMISSION
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
DATEOFBIRTH
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
DATE_FIRST_PCR_POSITIVE_TEST
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
SEX
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
PS001P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
01/12/2020
</td>
<td style="text-align:left;">
06/01/1972
</td>
<td style="text-align:left;">
Dec 01, 2020
</td>
<td style="text-align:left;">
male
</td>
</tr>
<tr>
<td style="text-align:left;">
PS002P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
28/01/2021
</td>
<td style="text-align:left;">
02/20/1952
</td>
<td style="text-align:left;">
Jan 01, 2021
</td>
<td style="text-align:left;">
male
</td>
</tr>
<tr>
<td style="text-align:left;">
PS004P2-1
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
15/02/2021
</td>
<td style="text-align:left;">
06/15/1961
</td>
<td style="text-align:left;">
Feb 11, 2021
</td>
<td style="text-align:left;">
unknow
</td>
</tr>
<tr>
<td style="text-align:left;">
PS003P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
11/02/2021
</td>
<td style="text-align:left;">
11/11/1947
</td>
<td style="text-align:left;">
Feb 01, 2021
</td>
<td style="text-align:left;">
male
</td>
</tr>
<tr>
<td style="text-align:left;">
P0005P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
17/02/2021
</td>
<td style="text-align:left;">
09/26/2000
</td>
<td style="text-align:left;">
Feb 16, 2021
</td>
<td style="text-align:left;">
female
</td>
</tr>
<tr>
<td style="text-align:left;">
PS006P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
17/02/2021
</td>
<td style="text-align:left;">
-99
</td>
<td style="text-align:left;">
May 02, 2021
</td>
<td style="text-align:left;">
female
</td>
</tr>
<tr>
<td style="text-align:left;">
PB500P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
28/02/2021
</td>
<td style="text-align:left;">
11/03/1989
</td>
<td style="text-align:left;">
Feb 19, 2021
</td>
<td style="text-align:left;">
male
</td>
</tr>
<tr>
<td style="text-align:left;">
PS008P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
22/02/2021
</td>
<td style="text-align:left;">
10/05/1976
</td>
<td style="text-align:left;">
Sep 20, 2021
</td>
<td style="text-align:left;">
female
</td>
</tr>
<tr>
<td style="text-align:left;">
PS010P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
02/03/2021
</td>
<td style="text-align:left;">
09/23/1991
</td>
<td style="text-align:left;">
Feb 26, 2021
</td>
<td style="text-align:left;">
male
</td>
</tr>
<tr>
<td style="text-align:left;">
PS011P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
05/03/2021
</td>
<td style="text-align:left;">
02/08/1991
</td>
<td style="text-align:left;">
Mar 03, 2021
</td>
<td style="text-align:left;">
female
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="calculating-age-in-different-time-scales">Calculating age in different time scales<a class="anchor" aria-label="anchor" href="#calculating-age-in-different-time-scales"></a>
</h3>
<p>The <code><a href="../reference/calculate_age.html">calculate_age()</a></code> function computes the ages of
individuals, expressed in years, months, weeks, or days, based on a
given date column and a reference date. It requires the following
arguments:</p>
<ol style="list-style-type: decimal">
<li><p><strong>data</strong>: The input dataset (required).</p></li>
<li><p><strong>target_column</strong>: A vector of the name of the
column containing the birth or relevant dates for which the age is being
calculated (required).</p></li>
<li><p><strong>end_date</strong>: This is the reference date used to
calculate the age of individuals (required). The function computes the
age relative to this date. The default value is today’s date
(<code><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date()</a></code>) &gt; The format required for this argument is
<code>%Y-%m-%d</code> (“2024-12-31” for 31st of December 2024).</p></li>
<li><p><strong>age_in</strong>: This parameter determines the unit in
which the age is expressed (required). It can be specified as “years”,
“months”, “weeks”, or “days”. By default, the age is calculated in years
if this parameter is not provided.</p></li>
<li><p><strong>age_column_name</strong>: A string for the name of the
age column added to the input data. The default is <code>age_in_*</code>
where <code>*</code> represents the unit specified in the ‘age_in’
argument.</p></li>
<li><p><strong>age_remainder_unit</strong>: A parameter used to
determine the number of the remaining days (remainder_days) or weeks
(remainder_weeks) or months (remainder_months), depending on the value
of the ‘age_remainder_unit’ parameter, after calculating the
age.</p></li>
</ol>
<p>With these arguments, the function offers flexibility in determining
the age of individuals based on different units and reference dates. It
facilitates various analytics tasks where age computation is a necessary
component, providing users with the ability to customize the output
according to their specific requirements.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># IMPORT THE INPUT DATA</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>, package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># REPLACE MISSING VALUES IN TARGET COLUMNS WITH `NA`</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/replace_missing_values.html">replace_missing_values</a></span><span class="op">(</span>data           <span class="op">=</span> <span class="va">data</span>,</span>
<span>                               target_columns <span class="op">=</span> <span class="st">"dateOfBirth"</span>,</span>
<span>                               na_strings     <span class="op">=</span> <span class="st">"-99"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># calculate_age() EXPECTS DATE VALUES IN ISO FORMAT.</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/standardize_dates.html">standardize_dates</a></span><span class="op">(</span>data            <span class="op">=</span> <span class="va">data</span>,</span>
<span>                          target_columns  <span class="op">=</span> <span class="st">"dateOfBirth"</span>,</span>
<span>                          error_tolerance <span class="op">=</span> <span class="fl">0.0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># CALCULATE INDIVIDUAL AGE IN YEARS FROM THE 'dateOfBirth' COLUMN AND SEND THE</span></span>
<span><span class="co"># REMAINDER IN MONTHS</span></span>
<span><span class="va">age</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_age.html">calculate_age</a></span><span class="op">(</span></span>
<span>  data               <span class="op">=</span> <span class="va">data</span>,</span>
<span>  target_column      <span class="op">=</span> <span class="st">"dateOfBirth"</span>,</span>
<span>  end_date           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  age_in             <span class="op">=</span> <span class="st">"years"</span>,</span>
<span>  age_remainder_unit <span class="op">=</span> <span class="st">"months"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># USING THE dplyr SYNTHAX</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>, package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">age</span>  <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/replace_missing_values.html">replace_missing_values</a></span><span class="op">(</span>target_columns <span class="op">=</span> <span class="st">"dateOfBirth"</span>,</span>
<span>                         na_strings     <span class="op">=</span> <span class="st">"-99"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/standardize_dates.html">standardize_dates</a></span><span class="op">(</span>target_columns  <span class="op">=</span> <span class="st">"dateOfBirth"</span>, error_tolerance <span class="op">=</span> <span class="fl">0.0</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/calculate_age.html">calculate_age</a></span><span class="op">(</span>target_column      <span class="op">=</span> <span class="st">"dateOfBirth"</span>,</span>
<span>                end_date           <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                age_in             <span class="op">=</span> <span class="st">"years"</span>,</span>
<span>                age_remainder_unit <span class="op">=</span> <span class="st">"months"</span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="../reference/calculate_age.html">calculate_age()</a></code> function augments the input dataset
by adding one or two extra columns containing age-related information.
These additional columns are as follows:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Calculated age in specified scale</strong>: Contains the
calculated age of individuals expressed in the specified unit (years,
months, weeks, or days).</p></li>
<li><p><strong>Remaining number of days</strong>: Indicates the
remaining number of days after calculating the age, representing the
fractional part of the age calculation. This column is included if
needed, and provides additional granularity in age
representation.</p></li>
</ol>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; overflow-x: scroll; width:100%; ">
<table class="table  lightable-paper lightable-striped" style='font-size: 18px; font-family: "Arial Narrow", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
STUDY_ID
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
EVENT_NAME
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
COUNTRY_CODE
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
COUNTRY_NAME
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
DATE.OF.ADMISSION
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
DATEOFBIRTH
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
DATE_FIRST_PCR_POSITIVE_TEST
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
SEX
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
AGE_IN_YEARS
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
REMAINDER_MONTHS
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
PS001P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
01/12/2020
</td>
<td style="text-align:left;">
1972-01-06
</td>
<td style="text-align:left;">
Dec 01, 2020
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
PS002P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
28/01/2021
</td>
<td style="text-align:left;">
1952-02-20
</td>
<td style="text-align:left;">
Jan 01, 2021
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
PS004P2-1
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
15/02/2021
</td>
<td style="text-align:left;">
1961-06-15
</td>
<td style="text-align:left;">
Feb 11, 2021
</td>
<td style="text-align:right;">
-99
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:left;">
PS003P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
11/02/2021
</td>
<td style="text-align:left;">
1947-11-11
</td>
<td style="text-align:left;">
Feb 01, 2021
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
76
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
P0005P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
17/02/2021
</td>
<td style="text-align:left;">
2000-09-26
</td>
<td style="text-align:left;">
Feb 16, 2021
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
PS006P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
17/02/2021
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
May 02, 2021
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
PB500P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
28/02/2021
</td>
<td style="text-align:left;">
1989-03-11
</td>
<td style="text-align:left;">
Feb 19, 2021
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
PS008P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
22/02/2021
</td>
<td style="text-align:left;">
1976-05-10
</td>
<td style="text-align:left;">
Sep 20, 2021
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
PS010P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
02/03/2021
</td>
<td style="text-align:left;">
1991-09-23
</td>
<td style="text-align:left;">
Feb 26, 2021
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
PS011P2
</td>
<td style="text-align:left;">
day 0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Gambia
</td>
<td style="text-align:left;">
05/03/2021
</td>
<td style="text-align:left;">
1991-08-02
</td>
<td style="text-align:left;">
Mar 03, 2021
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
7
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level2">
<h2 id="printing-the-report">Printing the report<a class="anchor" aria-label="anchor" href="#printing-the-report"></a>
</h2>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/print_report.html">print_report</a></span><span class="op">(</span></span>
<span>  data             <span class="op">=</span> <span class="va">data</span>,</span>
<span>  report_title     <span class="op">=</span> <span class="st">"{cleanepi} data cleaning report"</span>,</span>
<span>  output_directory <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  output_filename  <span class="op">=</span> <span class="st">"cleaning_report"</span>,</span>
<span>  format           <span class="op">=</span> <span class="st">"html"</span>,</span>
<span>  print            <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Karim Mané, Bubacarr Bah, Bankolé Ahadzie, Nuredin Mohammed, Abdoelnaser Degoot.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
