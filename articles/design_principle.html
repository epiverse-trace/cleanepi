<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Package Design vignette for {cleanepi} • cleanepi</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Package Design vignette for {cleanepi}">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">cleanepi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/cleanepi.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/design_principle.html">Package Design vignette for {cleanepi}</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/cleanepi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Package Design vignette for {cleanepi}</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/cleanepi/blob/main/vignettes/design_principle.Rmd" class="external-link"><code>vignettes/design_principle.Rmd</code></a></small>
      <div class="d-none name"><code>design_principle.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="concept-and-motivation">Concept and motivation<a class="anchor" aria-label="anchor" href="#concept-and-motivation"></a>
</h2>
<p>{cleanepi} is an R package crafted to clean, curate, and standardize
tabular datasets, with a particular focus on epidemiological data. Data
cleaning is an important phase in data analysis and modelling pipelines.
The procedures entailed in the cleaning process may differ based on the
data type and research objectives. Nonetheless, certain steps can be
applied universally across diverse data types.</p>
<p>In this document, we outline the design decisions that have steered
the development strategies of the {cleanepi} R package, along with the
rationale behind each decision and the potential advantages and
disadvantages associated with them.</p>
</div>
<div class="section level2">
<h2 id="design-decisions">Design decisions<a class="anchor" aria-label="anchor" href="#design-decisions"></a>
</h2>
<p>The {cleanepi} R package is designed to offer functional
programming-style data cleansing tasks. To streamline the organization
of data cleaning operations, we have categorized them into distinct
groups referred to as <strong>modules</strong>. These modules are based
on overarching goals derived from commonly anticipated data cleaning
procedures. Each module features a primary function along with
additional helper functions tailored to accomplish specific tasks. It’s
important to note that, except for few cases where the outcome from a
helper function can impact on the cleaning task, only the main function
of each module will be exported. This deliberate choice enables users to
execute individual cleaning tasks as needed, enhancing flexibility and
usability.</p>
<p>Every function in {cleanepi} is named such that it reflects the
action that it does. Functions with a similar effect have a name that
starts with the same prefix. The current version of the package contains
the following semantic prefixes:</p>
<ul>
<li>
<code>add_</code> is used to in functions that are made to add
something to an existing object</li>
<li>
<code>correct_</code> is used to correct existing values</li>
<li>
<code>convert_</code> is used in the two functions that aim at
converting values from one type to another</li>
<li>
<code>standardize_</code> is used to transform some values for
compliance with a predefined standard</li>
<li>
<code>clean_</code> is used in <code><a href="../reference/clean_data.html">clean_data()</a></code> and
<code><a href="../reference/clean_using_dictionary.html">clean_using_dictionary()</a></code>. It’s primary used to define
functions that operate on multiple columns.</li>
<li>
<code>check_</code> is used in functions that check whether some
values comply with expectations, without transforming them</li>
<li>
<code>remove_</code> is used in functions that remove some rows or
columns from the input dataset</li>
</ul>
<p>There are also other functions names that fall outside of this
semantic nomenclature due to their the specific nature of their actions:
<code><a href="../reference/replace_missing_values.html">replace_missing_values()</a></code>, <code><a href="../reference/scan_data.html">scan_data()</a></code>,
<code><a href="../reference/find_duplicates.html">find_duplicates()</a></code>, <code><a href="../reference/print_report.html">print_report()</a></code>,
<code><a href="../reference/get_default_params.html">get_default_params()</a></code></p>
<div class="float">
<img src="../reference/figures/cleanepi_design_diagram.drawio.png" align="center" alt="A diagram showing the modules in {cleanepi}."><div class="figcaption">A diagram showing the modules in
{cleanepi}.</div>
</div>
<p>At the core of {cleanepi}, the pivotal function
<code><a href="../reference/clean_data.html">clean_data()</a></code> serves as a wrapper encapsulating all the
modules, as illustrated in the figure above. This function is intended
to be the primary entry point for users seeking to clean their data. It
performs the cleaning operations as requested by the user through the
set of parameters that need to be explicitly defined. Furthermore,
multiple cleaning operations can be performed sequentially using the
pipe operators (<code>%&gt;%</code> or <code>|&gt;</code> for users of R
version 4.1 and above). In addition, this package also has two surrogate
functions:</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="../reference/scan_data.html">scan_data()</a></code>: This function enables users to assess the
data types present in each character-valued column of their dataset. The
composition in data types of character columns will inform the user
about what actions need to be performed on that column. Most frequent
scenarios involve the presence of:</li>
</ol>
<ul>
<li>
<code>date</code> values in either <code>Date</code> or
<code>numeric</code> format (when date column is imported from MS
Excel),</li>
<li>character values in a logical column (<code>not available</code>
within a column of <code>TRUE</code> or <code>FALSE</code>),</li>
<li>numbers written in letters.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>
<code><a href="../reference/print_report.html">print_report()</a></code>: For visualizing the report generated
from each applied cleaning task, facilitating transparency and
understanding of the data cleaning process.</li>
</ol>
<p>When the input data contains character columns,
<code><a href="../reference/scan_data.html">scan_data()</a></code> returns a data frame with the same number of
rows as the character columns and six columns representing: The given
names, proportion of missing, numeric, date, character, and logical
values, respectively, for the character-valued columns. We transpose the
result relative to the input dataset (columns in the input are returned
as row) to avoid horizontal scrolling in the case of datasets with a
large number of character columns. The sum of the proportion across all
columns is not always equal to <code>1</code>; because when numeric
values are found in a character column, they will be subjected to the
followings:</p>
<ol style="list-style-type: lower-alpha">
<li>Conversion into Date using <code><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">lubridate::as_date()</a></code> with
<code>origin = as.Date("1900-01-01")</code>.</li>
<li>Conversion into Date using <code><a href="../reference/date_guess.html">date_guess()</a></code> function used
by the <code><a href="../reference/standardize_dates.html">standardize_dates()</a></code> function.</li>
</ol>
<p>Numeric values that are successfully converted into date from either
of the methods above are considered as potential dates. They will be
added to the date count if they fall within interval of 50 years back
from the date of the process.</p>
<blockquote>
<p><strong>Note that</strong> there is no ambiguity for the columns of
type Date, logical, and numeric. values in such columns are expected to
be of the same type. Hence, the <code><a href="../reference/scan_data.html">scan_data()</a></code> function will
not be applied on columns other than character columns. Consequently, it
returns <code>NA</code> when applied on a dataset with no character
columns and print out a message about the absence of character columns
from the input dataset.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="scope">Scope<a class="anchor" aria-label="anchor" href="#scope"></a>
</h2>
<p>The data cleaning operations are categorized into modules, each
provides a specific data cleaning task. The modules in the current
version of {cleanepi} include:</p>
<ul>
<li>standardization of column names,</li>
<li>detection and removal of duplicates,</li>
<li>replacement of missing values with <code>NA</code>,</li>
<li>standardization of subject IDs,</li>
<li>standardization of date format,</li>
<li>replacement of existing values with predefined ones
(dictionary-based substitutions),</li>
<li>conversion of values when necessary,</li>
<li>verification of the sequence order of date-events, and</li>
<li>transformation of selected columns.</li>
</ul>
<p>By putting these operations into modules, {cleanepi} offers users a
systematic and adaptable framework to address diverse data cleaning
needs, especially within the realm of epidemiological datasets.</p>
</div>
<div class="section level2">
<h2 id="input">Input<a class="anchor" aria-label="anchor" href="#input"></a>
</h2>
<p>The primary function of each module, as well as the core function
<code><a href="../reference/clean_data.html">clean_data()</a></code>, accept input in the form of a
<code>data.frame</code> or <code>linelist</code>. This offers
flexibility for users regarding where they want to position {cleanepi}
within the R package ecosystem for epidemic analysis pipelines, either
to clean data before or after converting it to a
<code>linelist</code>.</p>
<p>In addition to the target dataset, the core function
<code><a href="../reference/clean_data.html">clean_data()</a></code> accepts other parameters that are specific to
the cleaning modules. Most of these parameters are provided in a form of
a <code>list</code>. It internally invokes the primary functions
specified in each module.</p>
</div>
<div class="section level2">
<h2 id="output">Output<a class="anchor" aria-label="anchor" href="#output"></a>
</h2>
<p>Both the primary functions of the modules and the core function
<code><a href="../reference/clean_data.html">clean_data()</a></code> return an object of the same type as the input
dataset. Every cleaning operations applied to the input dataset can add
an element to the report. The report generated from all cleaning tasks
is attached to the output object as an attribute. It can be accessed
using the <code><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr()</a></code> or <code><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes()</a></code> functions in
base R.</p>
<div class="section level3">
<h3 id="modules-in-cleanepi">Modules in {cleanepi}<a class="anchor" aria-label="anchor" href="#modules-in-cleanepi"></a>
</h3>
<p>In this section, we provide a detailed description of the way that
every module is built.</p>
<div class="section level4">
<h4 id="standardization-of-column-names">1. Standardization of column names<a class="anchor" aria-label="anchor" href="#standardization-of-column-names"></a>
</h4>
<p>This module is designed to standardize the style and format of column
names within the target dataset, offering users the flexibility to
specify a subset of:</p>
<ul>
<li>focal columns to preserve their original format, and</li>
<li>columns to be renamed, i.e., given a new name supplied by the
user.</li>
<li>
<strong>Main function:</strong>
<code><a href="../reference/standardize_column_names.html">standardize_column_names()</a></code>
</li>
<li>
<strong>Input:</strong>
<ul>
<li>A <code>data.frame</code> or <code>linelist</code> object.</li>
<li>Optional, a <code>vector</code> of focal column names and a vector
of column names to be renamed in the form of
<code>new_name = "old_name"</code>. If not provided, all columns will
undergo naming standardization.</li>
</ul>
</li>
<li>
<strong>Output:</strong>
<ul>
<li>The input object with standardized column names.</li>
</ul>
</li>
<li>
<strong>Report:</strong>
<ul>
<li>A two-column table displaying the initial and current column names
for each updated column in the original dataset.</li>
</ul>
</li>
<li>
<strong>Mode:</strong>
<ul>
<li>Explicit</li>
</ul>
</li>
</ul>
<p>The function provides means to keep column naming conventions, and
thereby enhancing the readability of the dataset.</p>
</div>
<div class="section level4">
<h4 id="removal-of-empty-rows-and-columns-and-constant-columns">2. Removal of empty rows and columns and constant columns<a class="anchor" aria-label="anchor" href="#removal-of-empty-rows-and-columns-and-constant-columns"></a>
</h4>
<p>This module aims at eliminating irrelevant and redundant rows and
columns, including empty rows and columns as well as constant columns.
The main function was initially (i.e. up to <code>version 1.0.2</code>)
built based on the {janitor} R package. We used
<code><a href="https://sfirke.github.io/janitor/reference/remove_empty.html" class="external-link">janitor::remove_empty()</a></code> and
<code>janitor::remove_conatant()</code> to remove empty rows and columns
and constant columns respectively. In
<code><a href="https://sfirke.github.io/janitor/reference/remove_empty.html" class="external-link">janitor::remove_empty()</a></code>, the empty rows are removed first,
then the empty columns. This maximizes the chance of keeping more
columns after this operation. However, we noticed that the removal of
the constant data might still result in a dataset with some empty rows
and/or columns and constant columns. Therefore, we introduced the
concept of iterative constant data removal in more recent versions of
the package (<code>&gt; v.1.0.2</code>). This means that the process of
removing constant data is performed iteratively until there is no
constant data. The report made from this operation informs about what
rows and columns were removed at every iteration.</p>
<ul>
<li>
<strong>Main function:</strong> <code><a href="../reference/remove_constants.html">remove_constants()</a></code>
</li>
<li>
<strong>Input:</strong>
<ul>
<li>Accepts a <code>data.frame</code> or <code>linelist</code> object,
along with:</li>
<li>A cut-off that determines the percent of missing values beyond which
a row or column should be deleted.</li>
</ul>
</li>
<li>
<strong>Output:</strong>
<ul>
<li>Returns the input object after applying the specified
operations.</li>
</ul>
</li>
<li>
<strong>Report:</strong>
<ul>
<li>A data frame with four columns showcasing the removed empty rows and
columns and constant columns at every iteration.</li>
</ul>
</li>
<li>
<strong>Mode:</strong>
<ul>
<li>explicit</li>
</ul>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="detection-and-removal-of-duplicates">3. Detection and removal of duplicates<a class="anchor" aria-label="anchor" href="#detection-and-removal-of-duplicates"></a>
</h4>
<p>This module is designed to identify and eliminate duplicated rows
across specific or all columns.</p>
<ul>
<li>
<strong>Main functions:</strong>
<code>find_duplicates(), remove_duplicates()</code>
</li>
<li>
<strong>Input:</strong>
<ul>
<li>Accepts a <code>data.frame</code> or <code>linelist</code> object,
along with optional parameters:</li>
<li>Vector of target columns (default is to consider all columns;
possible to use <code>linelist_tags</code> to consider tagged variables
only when the input is a linelist object).</li>
</ul>
</li>
<li>
<strong>Output:</strong>
<ul>
<li>Returns the input object after applying the specified
operations.</li>
</ul>
</li>
<li>
<strong>Report:</strong>
<ul>
<li>Two table(s) showcasing the found and removed duplicates.</li>
<li>A character vector with the columns used during duplicates
removal.</li>
</ul>
</li>
<li>
<strong>Mode:</strong>
<ul>
<li>explicit</li>
</ul>
</li>
</ul>
<p>Through the <code><a href="../reference/remove_duplicates.html">remove_duplicates()</a></code> function, users can
streamline their dataset by eliminating redundant rows, thus enhancing
data integrity and analysis efficiency.</p>
</div>
<div class="section level4">
<h4 id="replacement-of-missing-values-with-na">4. Replacement of missing values with <code>NA</code><a class="anchor" aria-label="anchor" href="#replacement-of-missing-values-with-na"></a>
</h4>
<p>This module aims to standardize and unify the representation of
missing values within the dataset.</p>
<ul>
<li>
<strong>Main function:</strong>
<code><a href="../reference/replace_missing_values.html">replace_missing_values()</a></code>
</li>
<li>
<strong>Input:</strong>
<ul>
<li>Accepts a <code>data.frame</code> or <code>linelist</code> object,
along with:</li>
<li>A <code>vector</code> of column names (if not provided, the
operation is performed across all columns)</li>
<li>A string or a vector of strings representing the current missing
values (default value is <code><a href="../reference/common_na_strings.html">cleanepi::common_na_strings</a></code>)</li>
</ul>
</li>
<li>
<strong>Output:</strong>
<ul>
<li>Returns the input object with all missing values represented as
<code>NA</code>.</li>
</ul>
</li>
<li>
<strong>Report:</strong>
<ul>
<li>Generates a three-column table featuring index, column, and value
for each missing item in the dataset.</li>
</ul>
</li>
<li>
<strong>Mode:</strong>
<ul>
<li>explicit</li>
</ul>
</li>
</ul>
<p>By utilizing the <code>replace_missing_char()</code> function, users
can ensure consistency in handling missing values across their dataset,
facilitating accurate analysis and interpretation of the data.</p>
</div>
<div class="section level4">
<h4 id="standardization-of-date-values">5. Standardization of date values<a class="anchor" aria-label="anchor" href="#standardization-of-date-values"></a>
</h4>
<p>This module is dedicated to convert date values in character columns
into <code>ISO8601</code> <code>Date</code> format, and ensuring that
all dates fall within a timeframe provided by the user.</p>
<ul>
<li>
<strong>Main function:</strong>
<code><a href="../reference/standardize_dates.html">standardize_dates()</a></code>
</li>
<li>
<strong>Input:</strong>
<ul>
<li>Accepts a <code>data.frame</code> or <code>linelist</code> object,
along with:</li>
<li>A <code>vector</code> of targeted date columns (automatically
determined if not provided)</li>
<li>Tolerance threshold that defines the percentage of missing (missing
and out of range values converted to <code>NA</code>) values to be
allowed in a converted column. When the percentage of the missing values
exceeds or is equal to it, the original values are returned (default
value is 40%).</li>
<li>format (default value is NULL)</li>
<li>timeframe (default value is null)</li>
</ul>
</li>
<li>
<strong>Output:</strong>
<ul>
<li>Returns the input object with standardized date values formatted as
<em>%Y-%m-%d</em> (YYYY-MM-DD).</li>
</ul>
</li>
<li>
<strong>Report:</strong>
<ul>
<li>A two-column table listing the columns where date values were
standardized.</li>
<li>A three-column table featuring index, column name, and values that
fall outside the specified timeframe.</li>
<li>A data frame featuring date values that can comply with more than
one specified format. Users can update the standardized date values with
the correct ones when it’s appropriated.</li>
</ul>
</li>
<li>
<strong>Mode:</strong>
<ul>
<li>explicit</li>
</ul>
</li>
</ul>
<p>By employing the <code><a href="../reference/standardize_dates.html">standardize_dates()</a></code> function, users can
ensure uniformity and coherence in date formats across their dataset,
while also validating the temporal integrity of the data within the
defined timeframe.</p>
</div>
<div class="section level4">
<h4 id="standardization-of-subject-ids">6. Standardization of subject IDs<a class="anchor" aria-label="anchor" href="#standardization-of-subject-ids"></a>
</h4>
<p>This module is tailored to verify whether the values in the column
uniquely identifying subjects adhere to a consistent format. It also
offers a functionality that allows users to correct the inconsistent
subject IDs.</p>
<ul>
<li>
<strong>Main function:</strong>
<code><a href="../reference/check_subject_ids.html">check_subject_ids()</a></code>
</li>
<li>
<strong>Input:</strong>
<ul>
<li>Accepts a <code>data.frame</code> or <code>linelist</code> object,
along with:</li>
<li>The name of the id column,</li>
<li>Strings for prefix, suffix,</li>
<li>A numerical range within the IDs,</li>
<li>An integer representing the expected number of characters in a
subject ID.</li>
</ul>
</li>
<li>
<strong>Output:</strong>
<ul>
<li>Returns the input object with standardized subject IDs.</li>
</ul>
</li>
<li>
<strong>Report:</strong>
<ul>
<li>Generates a two-column table featuring index and value of each
subject ID that deviates from the expected format.</li>
</ul>
</li>
<li>
<strong>Mode:</strong>
<ul>
<li>explicit</li>
</ul>
</li>
</ul>
<p>The <code><a href="../reference/correct_subject_ids.html">correct_subject_ids()</a></code> function can be used to
correct the identified incorrect subject ids. In addition to the input
data, it expects a data frame with two columns <code>from</code> and
<code>to</code> containing the wrong and the correct ids
respectively.</p>
<p>By utilizing the functions in this module, users can ensure
uniformity in the format of subject IDs, facilitating accurate tracking
and analysis of individual subjects within the dataset.</p>
</div>
<div class="section level4">
<h4 id="dictionary-based-substitution">7. Dictionary based substitution<a class="anchor" aria-label="anchor" href="#dictionary-based-substitution"></a>
</h4>
<p>This module facilitates dictionary-based substitution, which involves
replacing existing values with predefined ones. It replaces entries in a
specific columns to certain values, such as substituting 1 with “male”
and 2 with “female” in a gender column. It also interoperates seamlessly
with the <code>get_meta_data()</code> function from {readepi} R
package.</p>
<p>Note that the <code><a href="../reference/clean_using_dictionary.html">clean_using_dictionary()</a></code> function will
return a warning when it detects values in the target columns, which are
not mentioned in the data dictionary. These undeclared values can be
added to the data dictionary using the <code><a href="../reference/add_to_dictionary.html">add_to_dictionary()</a></code>
function.</p>
<ul>
<li>
<strong>Main function:</strong>
<code><a href="../reference/clean_using_dictionary.html">clean_using_dictionary()</a></code>
</li>
<li>
<strong>Input:</strong>
<ul>
<li>Accepts a <code>data.frame</code> or <code>linelist</code> object,
along with:</li>
<li>A data dictionary featuring the following column names:
<em>options</em>, <em>values</em>, and <em>order</em>.</li>
</ul>
</li>
<li>
<strong>Output:</strong>
<ul>
<li>Returns the input object where the specified options are replaced by
their corresponding values.</li>
</ul>
</li>
<li>
<strong>Report:</strong>
<ul>
<li>Generates a three-column table with index, column, and value for
each undeclared value encountered in a targeted column.</li>
</ul>
</li>
<li>
<strong>Mode:</strong>
<ul>
<li>explicit</li>
</ul>
</li>
</ul>
<p>By leveraging the <code><a href="../reference/clean_using_dictionary.html">clean_using_dictionary()</a></code> function,
users can streamline and standardize the values within specific columns
based on predefined mappings, enhancing consistency and accuracy in the
dataset.</p>
</div>
<div class="section level4">
<h4 id="conversion-of-values-when-necessary">8. Conversion of values when necessary<a class="anchor" aria-label="anchor" href="#conversion-of-values-when-necessary"></a>
</h4>
<p>This module is designed to convert numbers written in letters to
numerical values, ensuring interoperability with the <a href="https://epiverse-trace.github.io/numberize/" class="external-link">{numberize}</a>
package.</p>
<ul>
<li>
<strong>Main function:</strong>
<code><a href="../reference/convert_to_numeric.html">convert_to_numeric()</a></code>
</li>
<li>
<strong>Input:</strong>
<ul>
<li>Accepts a <code>data.frame</code> or <code>linelist</code> object,
along with:</li>
<li>A vector of column names to be converted into numeric. When not
provided, the target columns are identified from the output of the
<code><a href="../reference/scan_data.html">scan_data()</a></code> function,</li>
<li>A string that denotes the language used in the text. The current
version supports <strong>English (en)</strong>, <strong>French
(fr)</strong> and <strong>Spanish (es)</strong>.</li>
</ul>
</li>
<li>
<strong>Output:</strong>
<ul>
<li>Returns the input object with values in the target columns converted
into numeric format.</li>
</ul>
</li>
<li>
<strong>Report:</strong>
<ul>
<li>Generates a three-column table with index, column, and value for
each unrecognized value in the dataset (strings that could not be
converted into numeric).</li>
</ul>
</li>
<li>
<strong>Mode:</strong>
<ul>
<li>explicit</li>
</ul>
</li>
</ul>
<p>By employing the <code><a href="../reference/convert_to_numeric.html">convert_to_numeric()</a></code> function, users
can seamlessly transform numeric representations written in letters into
numerical values, ensuring compatibility with the {numberize} package
and promoting accuracy in numerical analysis.</p>
</div>
<div class="section level4">
<h4 id="verification-of-the-sequence-of-date-events">9. Verification of the sequence of date-events<a class="anchor" aria-label="anchor" href="#verification-of-the-sequence-of-date-events"></a>
</h4>
<p>This module provides functions to verify whether the sequence of date
events aligns with expectations. For instance, it can flag rows where
the date of admission to the hospital precedes the individual’s date of
birth.</p>
<ul>
<li>
<strong>Main function:</strong>
<code><a href="../reference/check_date_sequence.html">check_date_sequence()</a></code>
</li>
<li>
<strong>Input:</strong>
<ul>
<li>Accepts a <code>data.frame</code> or <code>linelist</code> object,
along with:</li>
<li>A vector of date column names to be considered</li>
</ul>
</li>
<li>
<strong>Output:</strong>
<ul>
<li>Returns the input object and sends a message to inform about the
presence of rows where the expected sequence of dates is not
respected.</li>
</ul>
</li>
<li>
<strong>Report:</strong>
<ul>
<li>Generates a table listing the incorrect rows from the specified
columns.</li>
</ul>
</li>
<li>
<strong>Mode:</strong>
<ul>
<li>explicit</li>
</ul>
</li>
</ul>
<p>By using the <code><a href="../reference/check_date_sequence.html">check_date_sequence()</a></code> function, users can
systematically validate and ensure the coherence of date sequences
within their dataset, promoting accuracy and reliability in subsequent
analyses.</p>
</div>
<div class="section level4">
<h4 id="transformation-of-selected-columns">10. Transformation of selected columns<a class="anchor" aria-label="anchor" href="#transformation-of-selected-columns"></a>
</h4>
<p>This module is dedicated to performing various specialized operations
related to epidemiological data analytics. In the current version of the
package, this module includes the following functions:</p>
<ul>
<li>
<strong>Main function:</strong> <code><a href="../reference/timespan.html">timespan()</a></code>
</li>
<li>
<strong>Input:</strong>
<ul>
<li>Accepts a <code>data.frame</code> or <code>linelist</code> object,
along with:</li>
<li>The name of the column of interest,</li>
<li>The reference date value or column,</li>
<li>The time and remainder units (possible values are “days”, “weeks”,
“months”, or “years”),</li>
<li>The names of the newly generated columns</li>
</ul>
</li>
<li>
<strong>Output:</strong>
<ul>
<li>Returns the input object with clean data and one or two additional
columns with values in the specified time unit.</li>
</ul>
</li>
<li>
<strong>Report:</strong>
<ul>
<li>None.</li>
</ul>
</li>
<li>
<strong>Mode:</strong>
<ul>
<li>explicit</li>
</ul>
</li>
</ul>
<p>By leveraging the <code><a href="../reference/timespan.html">timespan()</a></code> function, users can
efficiently compute and integrate time span information into their
epidemiological dataset based on user-defined parameters, enhancing the
analytics capabilities of the dataset.</p>
</div>
</div>
<div class="section level3">
<h3 id="surrogate-functions">Surrogate functions<a class="anchor" aria-label="anchor" href="#surrogate-functions"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p><code><a href="../reference/scan_data.html">scan_data()</a></code>: This function is designed to generate a
quick summary of the dataset, offering insights into the composition of
each character column. It calculates the percentage of values belonging
to different data types such as character, numeric, missing, logical,
and date. This summary can help analysts and data scientists understand
the structure and content of the dataset at a glance.</p></li>
<li><p><code><a href="../reference/print_report.html">print_report()</a></code>: This function is used for displaying
the report detailing the result of the cleaning operations executed on
the dataset. It likely presents information about the data cleaning
processes performed, such as handling missing values, correcting data
types, removing duplicates, and any other transformations applied to
ensure data quality and integrity.</p></li>
</ol>
<p>These surrogate functions play crucial roles in the data analysis and
cleaning workflow, providing valuable information and documentation
about the dataset characteristics and the steps taken to prepare it for
analysis or modelling.</p>
</div>
</div>
<div class="section level2">
<h2 id="related-packages">Related packages<a class="anchor" aria-label="anchor" href="#related-packages"></a>
</h2>
<p><a href="https://CRAN.R-project.org/package=janitor" class="external-link">{janitor}</a>,
<a href="https://CRAN.R-project.org/package=matchmaker" class="external-link">{matchmaker}</a>,
<a href="https://CRAN.R-project.org/package=naniar" class="external-link">{naniar}</a>, <a href="https://CRAN.R-project.org/package=daiquiri" class="external-link">{daiquiri}</a> <a href="https://CRAN.R-project.org/package=epiCleanr" class="external-link">{epiCleanr}</a></p>
</div>
<div class="section level2">
<h2 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h2>
<p>The modules and the surrogate functions depend on the following
packages:</p>
<p><a href="https://github.com/epiverse-trace/numberize" class="external-link">{numberize}</a>
used for the conversion of number from character to numeric, <a href="https://CRAN.R-project.org/package=dplyr" class="external-link">{dplyr}</a> used in many
ways including filtering, column creation, data summary, etc, <a href="https://CRAN.R-project.org/package=magrittr" class="external-link">{magrittr}</a> used
here for its <code>%&gt;%</code> operator, <a href="https://CRAN.R-project.org/package=linelist" class="external-link">{linelist}</a> used
to perform some operations on linelist-type input objects, <a href="https://CRAN.R-project.org/package=matchmaker" class="external-link">{matchmaker}</a>
utilized to perform the dictionary-based cleaning, <a href="https://CRAN.R-project.org/package=dplyr" class="external-link">{lubridate}</a> used to
create, handle, and manipulate objects of type Date, <a href="https://CRAN.R-project.org/package=reactable" class="external-link">{reactable}</a>
mainly used here to customize the data cleaning report, <a href="https://CRAN.R-project.org/package=cli" class="external-link">{cli}</a> utilized to
reformat all the messages in the package (from version 1.1.0 and above),
<a href="https://CRAN.R-project.org/package=rlang" class="external-link">{rlang}</a> used here
for its <code>.data</code> functionality to retrieve data-variables from
the data frame, <a href="https://CRAN.R-project.org/package=readr" class="external-link">{readr}</a> used to
import data, <a href="https://CRAN.R-project.org/package=janitor" class="external-link">{janitor}</a> used to
standardize column names in <code><a href="../reference/standardize_column_names.html">standardize_column_names()</a></code>, <a href="https://CRAN.R-project.org/package=tibble" class="external-link">{tibble}</a> used to
work tibbles. <a href="https://CRAN.R-project.org/package=tibble" class="external-link">{naniar}</a> used to
for its predefined set of common missing value strings.</p>
<p>The functions will require other packages that are needed in the
package development process including:</p>
<p><a href="https://CRAN.R-project.org/package=checkmate" class="external-link">{checkmate}</a>, <a href="https://CRAN.R-project.org/package=kableExtra" class="external-link">{kableExtra}</a>,
<a href="https://CRAN.R-project.org/package=bookdown" class="external-link">{bookdown}</a>, <a href="https://CRAN.R-project.org/package=rmarkdown" class="external-link">{rmarkdown}</a>, <a href="https://CRAN.R-project.org/package=testthat" class="external-link">{testthat}</a> (&gt;=
3.0.0), <a href="https://CRAN.R-project.org/package=knitr" class="external-link">{knitr}</a>,
<a href="https://CRAN.R-project.org/package=lintr" class="external-link">{lintr}</a>, <a href="https://CRAN.R-project.org/package=potools" class="external-link">{potools}</a></p>
</div>
<div class="section level2">
<h2 id="contribute">Contribute<a class="anchor" aria-label="anchor" href="#contribute"></a>
</h2>
<p>There are no special requirements to contributing to {cleanepi},
please follow the <a href="https://github.com/epiverse-trace/.github/blob/main/CONTRIBUTING.md" class="external-link">package
contributing guide</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Karim Mané, Abdoelnaser Degoot, Bankolé Ahadzie, Nuredin Mohammed, Bubacarr Bah, data.org.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
