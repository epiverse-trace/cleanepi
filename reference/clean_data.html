<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Clean and standardize data — clean_data • cleanepi</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Clean and standardize data — clean_data"><meta name="description" content="Cleans up messy data frames by performing several operations.
These include among others: cleaning of column names, detecting and
removing duplicates, empty records and columns, constant columns,
replacing missing values by NA, converting character columns into dates
when they contain a certain number of date values, detecting subject
IDs with wrong formats, etc."><meta property="og:description" content="Cleans up messy data frames by performing several operations.
These include among others: cleaning of column names, detecting and
removing duplicates, empty records and columns, constant columns,
replacing missing values by NA, converting character columns into dates
when they contain a certain number of date values, detecting subject
IDs with wrong formats, etc."><meta property="og:image" content="https://epiverse-trace.github.io/cleanepi/logo.svg"><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">cleanepi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/cleanepi.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/design_principle.html">Package Design vignette for {cleanepi}</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/cleanepi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Clean and standardize data</h1>
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/cleanepi/blob/main/R/clean_data.R" class="external-link"><code>R/clean_data.R</code></a></small>
      <div class="d-none name"><code>clean_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Cleans up messy data frames by performing several operations.
These include among others: cleaning of column names, detecting and
removing duplicates, empty records and columns, constant columns,
replacing missing values by NA, converting character columns into dates
when they contain a certain number of date values, detecting subject
IDs with wrong formats, etc.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">clean_data</span><span class="op">(</span><span class="va">data</span>, params <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>The input data frame or linelist</p></dd>


<dt id="arg-params">params<a class="anchor" aria-label="anchor" href="#arg-params"></a></dt>
<dd><p>A list of parameters that define what cleaning operations will
be applied on the input data. The default parameters are defined in
<code><a href="default_cleanepi_settings.html">cleanepi::default_cleanepi_settings()</a></code>. The possible values are:</p><ol><li><p><code>standardize_column_names</code>: A list with the arguments needed to
standardize the column names. The elements of this list will be the
input for the <code><a href="standardize_column_names.html">standardize_column_names()</a></code> function.</p></li>
<li><p><code>replace_missing_values</code>: A list of parameters to be used when
replacing the missing values by <code>NA</code>. The elements of the list are the
inputs for the <code><a href="replace_missing_values.html">replace_missing_values()</a></code> function.</p></li>
<li><p><code>remove_duplicates</code>: A list with the arguments that define the
columns and other parameters to be considered when looking for
duplicates. They are the input values for the <code><a href="remove_duplicates.html">remove_duplicates()</a></code>
function.</p></li>
<li><p><code>remove_constants</code>: A list with the parameters that define whether to
remove constant data or not. The values are the input for the
<code><a href="remove_constants.html">remove_constants()</a></code> function.</p></li>
<li><p><code>standardize_dates</code>: A list of parameters that will be used to
standardize the date values from the input data. They represent the
input values for the <code><a href="standardize_dates.html">standardize_dates()</a></code> function.</p></li>
<li><p><code>standardize_subject_ids</code>: A list of parameters that are needed to
check the IDs that comply with the expect format. These arguments are
the input values of the <code><a href="check_subject_ids.html">check_subject_ids()</a></code>.</p></li>
<li><p><code>to_numeric</code>: a vector of column names. When provided, the values in
these columns will be converted into numeric.</p></li>
<li><p><code>dictionary</code>: A data frame that will be used to substitute the
current values in the specified columns the those in the dictionary. It
is the main argument for the <code><a href="clean_using_dictionary.html">clean_using_dictionary()</a></code> function.</p></li>
<li><p><code>check_date_sequence</code>: A list of arguments to be used when
determining whether the sequence of date events is respected across all
rows of the input data. The value in this list are the input for the
<code><a href="check_date_sequence.html">check_date_sequence()</a></code> function.</p></li>
<li><p><code>span</code>: A list with the parameters that define how the time span will
be calculated between 2 columns of between a column and a Date value.
These arguments will be used in the <code>span()</code> function.</p></li>
</ol></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The cleaned input date according to the user-specified parameters.
This is associated with a data cleaning report that can be accessed using
<code>attr(cleaned_data, "report")</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Parameters for column names standardization</span></span></span>
<span class="r-in"><span><span class="va">standardize_col_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>keep <span class="op">=</span> <span class="cn">NULL</span>, rename <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># parameters to remove constant columns, empty rows and columns</span></span></span>
<span class="r-in"><span><span class="va">remove_cte</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cutoff <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Parameters for substituting missing values with NA:</span></span></span>
<span class="r-in"><span><span class="va">replace_missing_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>target_columns <span class="op">=</span> <span class="cn">NULL</span>, na_strings <span class="op">=</span> <span class="st">"-99"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Parameters for duplicates removal across all columns</span></span></span>
<span class="r-in"><span><span class="va">remove_duplicates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>target_columns   <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Parameters for dates standardization</span></span></span>
<span class="r-in"><span><span class="va">standardize_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>target_columns  <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                          error_tolerance <span class="op">=</span> <span class="fl">0.4</span>,</span></span>
<span class="r-in"><span>                          format          <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                          timeframe       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1973-05-29"</span>,</span></span>
<span class="r-in"><span>                                                      <span class="st">"2023-05-29"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                          orders          <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>                            world_named_months <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Ybd"</span>, <span class="st">"dby"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            world_digit_months <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dmy"</span>, <span class="st">"Ymd"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            US_formats         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Omdy"</span>, <span class="st">"YOmd"</span><span class="op">)</span></span></span>
<span class="r-in"><span>                          <span class="op">)</span>,</span></span>
<span class="r-in"><span>                          modern_excel    <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Parameters for subject IDs standardization</span></span></span>
<span class="r-in"><span><span class="va">standardize_subject_ids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>target_columns <span class="op">=</span> <span class="st">"study_id"</span>,</span></span>
<span class="r-in"><span>                                prefix         <span class="op">=</span> <span class="st">"PS"</span>,</span></span>
<span class="r-in"><span>                                suffix         <span class="op">=</span> <span class="st">"P2"</span>,</span></span>
<span class="r-in"><span>                                range          <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                nchar          <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">to_numeric</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>target_columns <span class="op">=</span> <span class="st">"sex"</span>, lang <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># dictionary = NULL the dictionary-based cleaning will not be performed here</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cleaned_data</span> <span class="op">&lt;-</span> <span class="fu">clean_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"test_df.RDS"</span>,</span></span>
<span class="r-in"><span>                               package <span class="op">=</span> <span class="st">"cleanepi"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    standardize_column_names <span class="op">=</span> <span class="va">standardize_col_names</span>,</span></span>
<span class="r-in"><span>    remove_constants         <span class="op">=</span> <span class="va">remove_cte</span>,</span></span>
<span class="r-in"><span>    replace_missing_values   <span class="op">=</span> <span class="va">replace_missing_values</span>,</span></span>
<span class="r-in"><span>    remove_duplicates        <span class="op">=</span> <span class="va">remove_duplicates</span>,</span></span>
<span class="r-in"><span>    standardize_dates        <span class="op">=</span> <span class="va">standardize_dates</span>,</span></span>
<span class="r-in"><span>    standardize_subject_ids  <span class="op">=</span> <span class="va">standardize_subject_ids</span>,</span></span>
<span class="r-in"><span>    to_numeric               <span class="op">=</span> <span class="va">to_numeric</span>,</span></span>
<span class="r-in"><span>    dictionary               <span class="op">=</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> cleaning column names</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> replacing missing values with NA</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> removing the constant columns, empty rows and columns</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> removing duplicated rows</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> standardising date columns</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> checking subject IDs format</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Detected incorrect subject ids at lines: 3, 5, 7</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Use the correct_subject_ids() function to adjust them.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> convertingsexeninto numeric</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Karim Mané, Abdoelnaser Degoot, Bankolé Ahadzie, Nuredin Mohammed, Bubacarr Bah, data.org.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

